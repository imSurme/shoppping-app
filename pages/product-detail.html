<!DOCTYPE html>
<html class="light" lang="tr">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
    <meta name="theme-color" content="#008080"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
    <title>AuraFlex Stride Sneaker - Modern Shopping App</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet"/>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#008080",
                        "primary-dark": "#006666",
                        "background-light": "#FFFFFF",
                        "background-dark": "#101922",
                        "card-background-light": "#F8F9FA",
                        "card-background-dark": "#1a242d",
                        "text-light": "#1F2937",
                        "text-dark": "#F9FAFB",
                        "text-muted-light": "#6B7280",
                        "text-muted-dark": "#9CA3AF",
                        "border-light": "#E5E7EB",
                        "border-dark": "#374151",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.75rem",
                        "lg": "1rem",
                        "xl": "1.25rem",
                        "full": "9999px"
                    },
                    boxShadow: {
                        'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
                        'soft-dark': '0 2px 15px -3px rgba(0, 0, 0, 0.3), 0 10px 20px -2px rgba(0, 0, 0, 0.2)',
                    }
                },
            },
        }
    </script>
    
    <style>
        .material-symbols-outlined {
            font-variation-settings:
            'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
        
        body {
            min-height: 100vh;
            min-height: 100dvh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Touch improvements */
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }
        
        /* Image gallery animations */
        .gallery-image {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .gallery-image:hover {
            transform: scale(1.02);
        }
        
        /* Button animations */
        .btn-primary {
            transition: all 0.2s ease-in-out;
        }
        
        .btn-primary:active {
            transform: scale(0.98);
        }
        
        .btn-secondary {
            transition: all 0.2s ease-in-out;
        }
        
        .btn-secondary:active {
            transform: scale(0.95);
        }
        
        /* Header button animations */
        .header-button {
            transition: all 0.2s ease-in-out;
        }
        
        .header-button:active {
            transform: scale(0.9);
        }
        
        /* Safe area for mobile devices */
        .bottom-nav {
            position: fixed !important;
            bottom: 0 !important;
            left: 0 !important;
            right: 0 !important;
            width: 100% !important;
            padding-bottom: env(safe-area-inset-bottom, 0px);
            box-sizing: border-box;
        }
        
        .safe-area-top {
            padding-top: env(safe-area-inset-top);
        }
        
        .safe-area-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        /* Loading animation */
        .loading-shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        .dark .loading-shimmer {
            background: linear-gradient(90deg, #374151 25%, #4B5563 50%, #374151 75%);
            background-size: 200% 100%;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        /* Quantity selector */
        .quantity-btn {
            transition: all 0.2s ease-in-out;
        }
        
        .quantity-btn:active {
            transform: scale(0.9);
        }
        
        /* Image pagination dots */
        .pagination-dot {
            transition: all 0.2s ease-in-out;
        }
        
        .pagination-dot.active {
            transform: scale(1.2);
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-text-light dark:text-text-dark">
    <div class="relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden">
        
        <!-- Header with navigation and favorite -->
        <header class="sticky top-0 z-20 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md safe-area-top">
            <div class="flex items-center p-4 pb-2 justify-between">
                <button class="header-button flex size-12 shrink-0 items-center justify-center rounded-full hover:bg-card-background-light dark:hover:bg-card-background-dark transition-colors" onclick="goBack()">
                    <span class="material-symbols-outlined text-3xl text-text-light dark:text-text-dark">arrow_back</span>
                </button>
                
                <div class="flex w-12 items-center justify-end">
                    <button class="header-button flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-12 bg-transparent text-text-light dark:text-text-dark gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0 hover:bg-card-background-light dark:hover:bg-card-background-dark transition-colors" onclick="toggleFavorite()">
                        <span class="material-symbols-outlined text-3xl" id="favoriteIcon">favorite_border</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Product Image Gallery -->
        <section class="pt-4 px-4" id="imageGallery">
            <div class="flex justify-center">
                <div class="w-full max-w-[400px]">
                    <div id="mainProductImage" class="gallery-image w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl flex flex-col cursor-pointer" data-alt="Ürün görseli" style='background-image: url("");' onclick="openImageModal(this)"></div>
                </div>
            </div>
        </section>

        <!-- Image Pagination (hidden for single image) -->
        <div class="px-4 pt-4 hidden" id="imagePagination">
            <div class="flex justify-center items-center gap-2">
                <div class="pagination-dot h-2 w-4 rounded-full bg-primary active" onclick="scrollToImage(0)"></div>
            </div>
        </div>

        <!-- Product Information -->
        <main class="p-4 flex flex-col gap-4 flex-grow">
            <h1 id="productName" class="text-text-light dark:text-text-dark tracking-tight text-[32px] font-bold leading-tight text-left">Ürün Yükleniyor...</h1>
            
            <!-- Rating - Clickable -->
            <div class="flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity" onclick="openReviewsModal()">
                <div class="flex items-center gap-1">
                    <span class="material-symbols-outlined text-primary text-lg" style="font-variation-settings: 'FILL' 1;">star</span>
                    <span class="material-symbols-outlined text-primary text-lg" style="font-variation-settings: 'FILL' 1;">star</span>
                    <span class="material-symbols-outlined text-primary text-lg" style="font-variation-settings: 'FILL' 1;">star</span>
                    <span class="material-symbols-outlined text-primary text-lg" style="font-variation-settings: 'FILL' 1;">star</span>
                    <span class="material-symbols-outlined text-gray-400 text-lg" style="font-variation-settings: 'FILL' 1;">star</span>
                </div>
                <p class="text-text-muted-light dark:text-text-muted-dark text-sm font-normal leading-normal underline" id="productReviews">(0 değerlendirme)</p>
                <span class="material-symbols-outlined text-text-muted-light dark:text-text-muted-dark text-sm">chevron_right</span>
            </div>
            
            <!-- Price -->
            <div class="flex items-center gap-3 flex-wrap">
                <h2 id="productPrice" class="text-primary text-4xl font-bold leading-tight tracking-tight">₺0</h2>
                <span id="originalPrice" class="hidden text-text-muted-light dark:text-text-muted-dark text-2xl line-through">₺0</span>
                <span id="discountBadge" class="hidden bg-red-500 text-white text-sm font-bold px-3 py-1 rounded-full">%0</span>
            </div>
            
            <!-- Description -->
            <div>
                <h3 class="text-text-light dark:text-text-dark text-lg font-bold mb-2">Açıklama</h3>
                <p id="productDescription" class="text-text-muted-light dark:text-text-muted-dark text-base font-normal leading-relaxed">Ürün açıklaması yükleniyor...</p>
            </div>
            
            <!-- Size Selection (shown only for clothing/shoes) -->
            <div id="sizeSelectionSection">
                <h3 class="text-text-light dark:text-text-dark text-lg font-bold mb-3">Beden Seçimi</h3>
                <div id="sizeButtonsContainer" class="flex flex-wrap gap-2">
                    <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="S">S</button>
                    <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="M">M</button>
                    <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="L">L</button>
                    <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="XL">XL</button>
                </div>
            </div>
            
            <!-- Quantity Selector -->
            <div class="flex items-center justify-between mt-4">
                <h3 class="text-text-light dark:text-text-dark text-lg font-bold">Miktar</h3>
                <div class="flex items-center gap-4">
                    <button class="quantity-btn flex items-center justify-center h-10 w-10 rounded-full bg-card-background-light dark:bg-card-background-dark text-text-light dark:text-text-dark text-2xl font-bold hover:bg-primary hover:text-white transition-colors" onclick="decreaseQuantity()">-</button>
                    <span class="text-text-light dark:text-text-dark text-xl font-bold min-w-[2rem] text-center" id="quantityDisplay">1</span>
                    <button class="quantity-btn flex items-center justify-center h-10 w-10 rounded-full bg-card-background-light dark:bg-card-background-dark text-text-light dark:text-text-dark text-2xl font-bold hover:bg-primary hover:text-white transition-colors" onclick="increaseQuantity()">+</button>
                </div>
            </div>
        </main>

        <!-- Add to Cart Button -->
        <div class="p-4 mt-auto bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-t border-border-light dark:border-border-dark" style="margin-bottom: 80px;">
            <button class="btn-primary w-full bg-primary text-white font-bold py-4 px-6 rounded-xl text-lg flex items-center justify-center gap-3" onclick="addToCart()">
                <span class="material-symbols-outlined">shopping_bag</span>
                Sepete Ekle
            </button>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav fixed bottom-0 left-0 right-0 z-20 bg-background-light dark:bg-background-dark border-t border-border-light dark:border-border-dark">
            <div class="flex px-2 py-1">
                <a class="nav-item flex flex-1 flex-col items-center justify-center gap-1 text-text-muted-light dark:text-text-muted-dark py-2" href="../index.html">
                    <span class="material-symbols-outlined text-2xl">home</span>
                    <p class="text-xs font-medium">Ana Sayfa</p>
                </a>
                <a class="nav-item flex flex-1 flex-col items-center justify-center gap-1 text-text-muted-light dark:text-text-muted-dark py-2 relative" href="shopping-cart.html">
                    <span class="material-symbols-outlined text-2xl">shopping_cart</span>
                    <p class="text-xs font-medium">Sepet</p>
                    <span class="absolute -top-1 -right-1 bg-primary text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold cart-badge">2</span>
                </a>
                <a class="nav-item flex flex-1 flex-col items-center justify-center gap-1 text-text-muted-light dark:text-text-muted-dark py-2" href="profile/user-profile.html">
                    <span class="material-symbols-outlined text-2xl">person</span>
                    <p class="text-xs font-medium">Profil</p>
                </a>
            </div>
        </nav>

    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="fixed inset-0 z-50 bg-black/90 hidden flex items-center justify-center p-4">
        <div class="relative w-full max-w-4xl">
            <button onclick="closeImageModal()" class="absolute top-4 right-4 z-10 text-white bg-black/50 rounded-full p-2">
                <span class="material-symbols-outlined">close</span>
            </button>
            <img id="modalImage" class="w-full h-auto rounded-xl" src="" alt="">
        </div>
    </div>

    <!-- Cart Manager -->
    <script src="../js/cart-manager.js"></script>
    
    <!-- JavaScript for enhanced interactions -->
    <script>
        let currentQuantity = 1;
        let selectedSize = null;
        let isFavorite = false;
        
        // Product data from URL
        let currentProduct = {
            id: '',
            name: '',
            price: 0,
            originalPrice: null,
            image: '',
            category: '',
            description: ''
        };

        // Parse URL parameters and load product
        function loadProductFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            
            currentProduct.id = urlParams.get('id') || '1';
            currentProduct.name = decodeURIComponent(urlParams.get('name') || 'Ürün');
            currentProduct.price = parseFloat(urlParams.get('price') || '0');
            currentProduct.image = decodeURIComponent(urlParams.get('image') || '');
            currentProduct.category = urlParams.get('category') || '';
            
            // Get description - use a better default if empty
            const descParam = urlParams.get('description');
            if (descParam && descParam !== '' && descParam !== 'undefined') {
                currentProduct.description = decodeURIComponent(descParam);
            } else {
                currentProduct.description = `${currentProduct.name} - Yüksek kaliteli ürün. Detaylı bilgi için mağazamızı ziyaret edin.`;
            }
            
            // Get pre-selected size from URL (when coming from cart)
            const preSelectedSize = urlParams.get('size') || '';
            
            // Get original price for discount display
            const originalPriceParam = urlParams.get('originalPrice');
            currentProduct.originalPrice = originalPriceParam ? parseFloat(originalPriceParam) : null;
            
            // Update page content
            document.getElementById('productName').textContent = currentProduct.name;
            document.getElementById('productPrice').textContent = `₺${currentProduct.price.toLocaleString('tr-TR')}`;
            document.getElementById('productDescription').textContent = currentProduct.description;
            
            // Show discount if original price exists
            if (currentProduct.originalPrice && currentProduct.originalPrice > currentProduct.price) {
                const discountPercent = Math.round((1 - currentProduct.price / currentProduct.originalPrice) * 100);
                document.getElementById('originalPrice').textContent = `₺${currentProduct.originalPrice.toLocaleString('tr-TR')}`;
                document.getElementById('originalPrice').classList.remove('hidden');
                document.getElementById('discountBadge').textContent = `%${discountPercent}`;
                document.getElementById('discountBadge').classList.remove('hidden');
            }
            document.title = `${currentProduct.name} - Modern Shopping App`;
            
            // Update product image
            const mainImage = document.getElementById('mainProductImage');
            if (mainImage && currentProduct.image) {
                mainImage.style.backgroundImage = `url("${currentProduct.image}")`;
            }
            
            // Generate random review count for demo
            const reviewCount = Math.floor(Math.random() * 2000) + 100;
            document.getElementById('productReviews').textContent = `(${reviewCount} değerlendirme)`;
            
            // Show/hide size selection based on category
            const sizeSection = document.getElementById('sizeSelectionSection');
            const needsSize = ['erkek', 'kadin', 'cocuk'].includes(currentProduct.category);
            
            if (needsSize) {
                sizeSection.style.display = 'block';
                // Update size buttons based on product name (shoes vs clothing)
                const isShoes = currentProduct.name.toLowerCase().includes('ayakkabı');
                const sizeContainer = document.getElementById('sizeButtonsContainer');
                
                if (isShoes) {
                    sizeContainer.innerHTML = `
                        <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="38">38</button>
                        <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="39">39</button>
                        <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="40">40</button>
                        <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="41">41</button>
                        <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="42">42</button>
                        <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="43">43</button>
                        <button class="size-btn px-4 py-2 rounded-lg border border-border-light dark:border-border-dark text-text-light dark:text-text-dark hover:bg-primary hover:text-white hover:border-primary transition-colors" data-size="44">44</button>
                    `;
                }
                
                // Re-attach size button event listeners and pre-select size if provided
                initSizeButtons(preSelectedSize);
            } else {
                sizeSection.style.display = 'none';
            }
        }
        
        // Initialize size buttons
        function initSizeButtons(preSelectedSize = '') {
            const sizeButtons = document.querySelectorAll('.size-btn');
            
            sizeButtons.forEach(button => {
                // Pre-select size if provided (from cart)
                if (preSelectedSize && button.dataset.size === preSelectedSize) {
                    button.classList.add('bg-primary', 'text-white', 'border-primary');
                    button.classList.remove('border-border-light', 'dark:border-border-dark', 'text-text-light', 'dark:text-text-dark');
                    selectedSize = preSelectedSize;
                }
                
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    sizeButtons.forEach(btn => {
                        btn.classList.remove('bg-primary', 'text-white', 'border-primary');
                        btn.classList.add('border-border-light', 'dark:border-border-dark', 'text-text-light', 'dark:text-text-dark');
                    });
                    
                    // Add active class to clicked button
                    this.classList.add('bg-primary', 'text-white', 'border-primary');
                    this.classList.remove('border-border-light', 'dark:border-border-dark', 'text-text-light', 'dark:text-text-dark');
                    
                    selectedSize = this.dataset.size;
                    console.log('Selected size:', selectedSize);
                });
            });
        }
        
        // Load product on page load
        document.addEventListener('DOMContentLoaded', loadProductFromURL);

        // Navigation functions
        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.location.href = '../index.html';
            }
        }

        // Favorite functionality
        function toggleFavorite() {
            const icon = document.getElementById('favoriteIcon');
            isFavorite = !isFavorite;
            
            if (isFavorite) {
                icon.textContent = 'favorite';
                icon.style.fontVariationSettings = "'FILL' 1";
                icon.classList.add('text-red-500');
                console.log('Added to favorites');
            } else {
                icon.textContent = 'favorite_border';
                icon.style.fontVariationSettings = "'FILL' 0";
                icon.classList.remove('text-red-500');
                console.log('Removed from favorites');
            }
        }

        // Quantity management
        function increaseQuantity() {
            currentQuantity++;
            updateQuantityDisplay();
        }

        function decreaseQuantity() {
            if (currentQuantity > 1) {
                currentQuantity--;
                updateQuantityDisplay();
            }
        }

        function updateQuantityDisplay() {
            document.getElementById('quantityDisplay').textContent = currentQuantity;
        }

        // Size selection is now handled by initSizeButtons() called from loadProductFromURL()

        // Image gallery functionality
        function scrollToImage(index) {
            const gallery = document.getElementById('imageGallery');
            const images = gallery.querySelectorAll('.gallery-image');
            const dots = document.querySelectorAll('.pagination-dot');
            
            // Update dots
            dots.forEach((dot, i) => {
                if (i === index) {
                    dot.classList.add('active', 'bg-primary');
                    dot.classList.remove('bg-gray-300', 'dark:bg-gray-600');
                } else {
                    dot.classList.remove('active', 'bg-primary');
                    dot.classList.add('bg-gray-300', 'dark:bg-gray-600');
                }
            });
            
            // Scroll to image
            images[index].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }

        // Image modal functionality
        function openImageModal(imageElement) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            
            modalImage.src = imageElement.style.backgroundImage.slice(5, -2);
            modalImage.alt = imageElement.dataset.alt;
            modal.classList.remove('hidden');
            
            // Prevent body scroll
            document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.add('hidden');
            
            // Restore body scroll
            document.body.style.overflow = 'auto';
        }

        // Close modal on backdrop click
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeImageModal();
            }
        });

        // Add to cart functionality
        function addToCart() {
            // Only require size for clothing/shoes categories
            const needsSize = ['erkek', 'kadin', 'cocuk'].includes(currentProduct.category);
            
            if (needsSize && !selectedSize) {
                alert('Lütfen bir beden seçiniz.');
                return;
            }
            
            const productData = {
                id: `product-${currentProduct.id}`,
                name: currentProduct.name,
                price: currentProduct.price,
                originalPrice: currentProduct.originalPrice,
                size: selectedSize || 'Standart',
                quantity: currentQuantity,
                color: 'Standart',
                image: currentProduct.image,
                category: currentProduct.category,
                description: currentProduct.description
            };
            
            // Add to cart using cart manager
            cartManager.addToCart(productData);
            
            // Show success message instead of navigating
            showSuccessMessage('Ürün sepete eklendi!');
        }

        // Success message
        function showSuccessMessage(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 z-50 bg-primary text-white px-6 py-3 rounded-lg shadow-lg';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Dark mode functionality
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
        }

        // Initialize dark mode from localStorage
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark');
        }

        // Prevent zoom on double tap for iOS
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // Image gallery scroll detection (simplified for single image)

        // Add loading states for images
        const productImages = document.querySelectorAll('[style*="background-image"]');
        productImages.forEach(img => {
            img.addEventListener('load', function() {
                this.classList.remove('loading-shimmer');
            });
        });
    </script>

    <!-- Reviews Modal -->
    <div id="reviewsModal" class="fixed inset-0 z-50 hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="closeReviewsModal()"></div>
        
        <!-- Modal Content -->
        <div class="absolute bottom-0 left-0 right-0 bg-background-light dark:bg-background-dark rounded-t-3xl max-h-[85vh] overflow-hidden animate-slide-up">
            <!-- Modal Header -->
            <div class="sticky top-0 bg-background-light dark:bg-background-dark border-b border-border-light dark:border-border-dark p-4 flex items-center justify-between">
                <h2 class="text-lg font-bold text-text-light dark:text-text-dark">Değerlendirmeler</h2>
                <button onclick="closeReviewsModal()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors">
                    <span class="material-symbols-outlined text-text-light dark:text-text-dark">close</span>
                </button>
            </div>
            
            <!-- Rating Summary -->
            <div class="p-4 border-b border-border-light dark:border-border-dark">
                <div class="flex items-center gap-4">
                    <div class="text-center">
                        <p class="text-4xl font-bold text-text-light dark:text-text-dark">4.2</p>
                        <div class="flex items-center justify-center gap-0.5 my-1">
                            <span class="material-symbols-outlined text-primary text-sm" style="font-variation-settings: 'FILL' 1;">star</span>
                            <span class="material-symbols-outlined text-primary text-sm" style="font-variation-settings: 'FILL' 1;">star</span>
                            <span class="material-symbols-outlined text-primary text-sm" style="font-variation-settings: 'FILL' 1;">star</span>
                            <span class="material-symbols-outlined text-primary text-sm" style="font-variation-settings: 'FILL' 1;">star</span>
                            <span class="material-symbols-outlined text-gray-400 text-sm" style="font-variation-settings: 'FILL' 1;">star</span>
                        </div>
                        <p id="modalReviewCount" class="text-xs text-text-muted-light dark:text-text-muted-dark">0 değerlendirme</p>
                    </div>
                    <div class="flex-1 space-y-1">
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-text-muted-light dark:text-text-muted-dark w-3">5</span>
                            <div class="flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-primary rounded-full" style="width: 60%"></div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-text-muted-light dark:text-text-muted-dark w-3">4</span>
                            <div class="flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-primary rounded-full" style="width: 25%"></div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-text-muted-light dark:text-text-muted-dark w-3">3</span>
                            <div class="flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-primary rounded-full" style="width: 10%"></div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-text-muted-light dark:text-text-muted-dark w-3">2</span>
                            <div class="flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-primary rounded-full" style="width: 3%"></div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-text-muted-light dark:text-text-muted-dark w-3">1</span>
                            <div class="flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="h-full bg-primary rounded-full" style="width: 2%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Reviews List -->
            <div class="overflow-y-auto max-h-[50vh] p-4 space-y-4" id="reviewsList">
                <!-- Reviews will be generated here -->
            </div>
        </div>
    </div>

    <style>
        @keyframes slide-up {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        .animate-slide-up {
            animation: slide-up 0.3s ease-out;
        }
    </style>

    <script>
        // Sample review names
        const reviewNames = ['Ahmet Y.', 'Mehmet K.', 'Ayşe S.', 'Fatma D.', 'Ali R.', 'Zeynep M.', 'Mustafa T.', 'Elif B.', 'Hasan Ö.', 'Seda A.'];
        const reviewComments = [
            'Çok kaliteli bir ürün, kesinlikle tavsiye ederim.',
            'Beklediğimden daha iyi çıktı, memnunum.',
            'Fiyat/performans açısından gayet iyi.',
            'Hızlı kargo ve güzel paketleme.',
            'Ürün tam açıklandığı gibi, teşekkürler.',
            'Rengi biraz farklı ama genel olarak güzel.',
            'İkinci kez alıyorum, her zaman memnun kaldım.',
            'Kumaş kalitesi çok iyi.',
            'Bedeni tam oturdu, süper!',
            'Hediye olarak aldım, çok beğenildi.'
        ];

        function generateReviews() {
            const reviewsList = document.getElementById('reviewsList');
            const reviews = [];
            
            for (let i = 0; i < 8; i++) {
                const name = reviewNames[Math.floor(Math.random() * reviewNames.length)];
                const comment = reviewComments[Math.floor(Math.random() * reviewComments.length)];
                const rating = Math.floor(Math.random() * 2) + 4; // 4 or 5 stars mostly
                const daysAgo = Math.floor(Math.random() * 30) + 1;
                
                const stars = Array(5).fill('').map((_, idx) => 
                    `<span class="material-symbols-outlined text-${idx < rating ? 'primary' : 'gray-400'} text-sm" style="font-variation-settings: 'FILL' 1;">star</span>`
                ).join('');
                
                reviews.push(`
                    <div class="bg-card-background-light dark:bg-card-background-dark rounded-xl p-4">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center">
                                    <span class="text-primary font-bold text-sm">${name.charAt(0)}</span>
                                </div>
                                <span class="font-medium text-text-light dark:text-text-dark text-sm">${name}</span>
                            </div>
                            <span class="text-xs text-text-muted-light dark:text-text-muted-dark">${daysAgo} gün önce</span>
                        </div>
                        <div class="flex items-center gap-0.5 mb-2">
                            ${stars}
                        </div>
                        <p class="text-sm text-text-muted-light dark:text-text-muted-dark">${comment}</p>
                    </div>
                `);
            }
            
            reviewsList.innerHTML = reviews.join('');
        }

        function openReviewsModal() {
            const modal = document.getElementById('reviewsModal');
            const reviewCountText = document.getElementById('productReviews').textContent;
            document.getElementById('modalReviewCount').textContent = reviewCountText.replace(/[()]/g, '');
            generateReviews();
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeReviewsModal() {
            const modal = document.getElementById('reviewsModal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }
    </script>
</body>
</html>
